const h=document.querySelector(".js-search_input"),g=document.querySelector(".js-search_btn"),A=document.querySelector(".js-reset_btn"),x=document.querySelector(".js-delete_btn"),o=document.querySelector(".js-search_list"),d=document.querySelector(".js-fav_list");let a=[],n=[];function _(i){i.preventDefault();const e=h.value;fetch(`https://api.jikan.moe/v4/anime?q=${e}`).then(t=>t.json()).then(t=>{a=t.data,r(a,o),m()})}g.addEventListener("click",_);function r(i,e){e.innerHTML="";for(const t of i){const c=document.createElement("li");c.setAttribute("id",t.mal_id),c.setAttribute("class","js-li"),e.appendChild(c);const s=document.createElement("img"),f=document.createElement("h3"),p=document.createTextNode(t.title);if(f.appendChild(p),c.append(s,f),t.images.webp.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?s.setAttribute("src","https://placehold.co/210x295/ffffff/666666/png"):s.setAttribute("src",t.images.webp.image_url),n.find(l=>l.mal_id===t.mal_id)){c.setAttribute("class","favorite");const l=document.createElement("button");l.setAttribute("class","js-remove");const v=document.createTextNode("X");l.appendChild(v),c.appendChild(l)}}}function b(i){const e=parseInt(i.currentTarget.id),t=a.find(s=>s.mal_id===e);n.findIndex(s=>s.mal_id===e)===-1&&n.push(t),localStorage.setItem("favAnimeSeries",JSON.stringify(n)),r(n,d),u(),r(a,o),m()}const m=()=>{const i=document.querySelectorAll(".js-li");for(const e of i)e.addEventListener("click",b)};function j(){localStorage.removeItem("favAnimeSeries")}A.addEventListener("click",j);function y(){localStorage.removeItem("favAnimeSeries"),n=[],d.innerHTML="",r(a,o),m()}x.addEventListener("click",y);function L(i){const e=parseInt(i.target.parentElement.id),t=n.findIndex(c=>c.mal_id===e);n.splice(t,1),localStorage.setItem("favAnimeSeries",JSON.stringify(n)),r(n,d),u(),r(a,o),m()}const u=()=>{const i=document.querySelectorAll(".js-remove");for(const e of i)e.addEventListener("click",L)},S=localStorage.getItem("favAnimeSeries");S&&(n=JSON.parse(S));r(n,d);u();
//# sourceMappingURL=main.js.map
